{% extends "base.html" %}
{% block content %}
<main class="container">
    <div class="about-header">
        <h1>About MLB Predictions</h1>
        <p class="lead">Combining advanced statistics and machine learning to predict MLB game outcomes</p>
    </div>

    <div class="methodology-timeline">
        <div class="methodology-card">
            <div class="methodology-icon">
                <span class="step-number">1</span>
            </div>
            <div class="methodology-content">
                <h2>Data Collection & Preparation</h2>
                <div class="tech-stack">
                    <span class="tech-badge">R</span>
                    <span class="tech-badge">baseballr</span>
                    <span class="tech-badge">fangraphs</span>
                </div>
                <p>Data is collected through sophisticated MLB APIs and statistical databases, processed and normalized for analysis.</p>
                
                <div class="data-sources">
                    <h3>Key Data Sources</h3>
                    <div class="data-grid">
                        <div class="data-item">
                            <h4>Team Statistics</h4>
                            <ul>
                                <li>Batting Statistics</li>
                                <li>Pitching Analytics</li>
                                <li>Fielding Metrics</li>
                            </ul>
                        </div>
                        <div class="data-item">
                            <h4>Player Analytics</h4>
                            <ul>
                                <li>Individual Performance</li>
                                <li>Historical Stats</li>
                                <li>Game Logs</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="methodology-card">
            <div class="methodology-icon">
                <span class="step-number">2</span>
            </div>
            <div class="methodology-content">
                <h2>Elo Rating System</h2>
                <div class="tech-stack">
                    <span class="tech-badge">Python</span>
                    <span class="tech-badge">NumPy</span>
                    <span class="tech-badge">Pandas</span>
                </div>
                <p>Teams start with a base Elo rating of 1000, which evolves based on game outcomes and opponent strength.</p>
                
                <div class="formula-card">
                    <h3>Elo Update Formula</h3>
                    <code class="highlight-code">elo_new = elo_old + K * (actual_result - expected_result)</code>
                </div>

                <div class="feature-list">
                    <h3>Key Features</h3>
                    <div class="feature-grid">
                        <div class="feature-box">
                            <span class="feature-icon">üìà</span>
                            <h4>Win/Loss Streaks</h4>
                            <p>Dynamic adjustments based on recent team performance</p>
                        </div>
                        <div class="feature-box">
                            <span class="feature-icon">üîÑ</span>
                            <h4>Season Resets</h4>
                            <p>Annual rating adjustments with regression to baseline</p>
                        </div>
                        <div class="feature-box">
                            <span class="feature-icon">üìä</span>
                            <h4>Victory Margins</h4>
                            <p>Score-based rating modifications for game outcomes</p>
                        </div>
                        <div class="feature-box">
                            <span class="feature-icon">‚öñÔ∏è</span>
                            <h4>Strength Adjustments</h4>
                            <p>Opponent quality-based rating changes</p>
                        </div>
                    </div>
                </div>

                <div class="visualization">
                    <img src="{{ url_for('static', filename='images/TeamElo_GridSearch_Performance.png') }}" 
                         alt="Grid Search Performance" 
                         class="analysis-image">
                    <p class="image-caption">Grid search results showing RMSE vs R¬≤ optimization</p>
                </div>
            </div>
        </div>

        <div class="methodology-card">
            <div class="methodology-icon">
                <span class="step-number">3</span>
            </div>
            <div class="methodology-content">
                <h2>Run Prediction Models</h2>
                <div class="tech-stack">
                    <span class="tech-badge">scikit-learn</span>
                    <span class="tech-badge">XGBoost</span>
                    <span class="tech-badge">statsmodels</span>
                </div>
                <p>Multiple statistical models are trained and evaluated to predict run scoring for each team.</p>

                <div class="models-section">
                    <h3>Prediction Models</h3>
                    <div class="models-grid">
                        <div class="model-box">
                            <span class="model-icon">üìä</span>
                            <h4>Linear Regression</h4>
                            <p>Baseline model providing stable predictions for regular game scenarios</p>
                        </div>
                        <div class="model-box">
                            <span class="model-icon">üìà</span>
                            <h4>Poisson Regression</h4>
                            <p>Specialized model for count-based run prediction</p>
                        </div>
                        <div class="model-box">
                            <span class="model-icon">üîÑ</span>
                            <h4>Gradient Boosting</h4>
                            <p>Advanced model capturing complex game patterns</p>
                        </div>
                        <div class="model-box">
                            <span class="model-icon">üå≥</span>
                            <h4>Random Forest</h4>
                            <p>Ensemble method for feature importance analysis</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="methodology-card">
            <div class="methodology-icon">
                <span class="step-number">4</span>
            </div>
            <div class="methodology-content">
                <h2>Win Probability Prediction</h2>
                <div class="tech-stack">
                    <span class="tech-badge">Flask</span>
                    <span class="tech-badge">SQL</span>
                    <span class="tech-badge">API</span>
                </div>
                <p>Final predictions are generated using logistic regression on expected run differentials.</p>

                <div class="formula-card">
                    <h3>Win Probability Model</h3>
                    <code class="highlight-code">glm(actual_winner ~ predicted_diff, family = "binomial")</code>
                </div>
            </div>
        </div>
    </div>

    <div class="conclusion-card">
        <h2>Project Impact</h2>
        <div class="impact-grid">
            <div class="impact-item">
                <span class="impact-icon">üéØ</span>
                <h3>Accurate Predictions</h3>
                <p>Data-driven predictions based on comprehensive statistical analysis</p>
            </div>
            <div class="impact-item">
                <span class="impact-icon">üìä</span>
                <h3>Advanced Analytics</h3>
                <p>Integration of modern baseball metrics and machine learning</p>
            </div>
            <div class="impact-item">
                <span class="impact-icon">‚ö°</span>
                <h3>Real-time Updates</h3>
                <p>Live predictions updated with the latest game data</p>
            </div>
            <div class="impact-item">
                <span class="impact-icon">üîç</span>
                <h3>Transparent Logic</h3>
                <p>Clear explanation of prediction methodology</p>
            </div>
        </div>
    </div>
</main>
{% endblock %}
